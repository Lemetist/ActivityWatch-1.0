{% extends "app/base.html" %}
{% block style %}
    {# insert css stylings specific to page here #}
{% endblock style %}
{% block body %}
    <h1>Результаты</h1>
    <p class="text-muted">Просмотр вашего прогресса с течением времени.</p>
    <hr>
    <div class="mb-4">
        <a href="{% url 'app:export_csv' %}">
            <Button class="btn btn-outline-success">Экспорт CSV</Button>
        </a>
        <a href="{% url 'app:export_json' %}">
            <Button class="btn btn-outline-success">Экспорт JSON</Button>
        </a>
    </div>
    <div class="row">
        <div class="col-3">
            <div class="card">
                <div class="card-body">
                    <h1 class="card-title">
                        {{ change }} <span class="small">кг</span>
                    </h1>
                    <p class="card-text">
                        <i class="fa fa-line-chart"></i> Изменение веса
                        <br>
                        <span>&shy;</span>
                    </p>
                </div>
            </div>
        </div>
        <div class="col-3">
            <div class="card">
                <div class="card-body">
                    <h1 class="card-title">
                        {{ str_change }} <span class="small">%</span>
                    </h1>
                    <p class="card-text">
                        <i class="fa fa-bolt"></i>  Изменение силы {% if not request.GET.ex %} <br><span class="small text-danger">Упражнение не выбрано</span> {% else %} <br><span>&shy;</span>{% endif %}
                    </p>
                </div>
            </div>
        </div>
        <div class="col-3">
            <div class="card">
                <div class="card-body">
                    <h1 class="card-title">
                       {{ avg_cals }} <span class="small">ккал</span>
                    </h1>
                    <p class="card-text">
                        <i class="fa fa-cutlery"></i>  Среднее дневное потребление
                        <br>
                        <span>&shy;</span>
                    </p>
                </div>
            </div>
        </div>
        <div class="col-3">
            <div class="card">
                <div class="card-body">
                    <h1 class="card-title">
                        {{ average }} <span class="small">кг</span>
                    </h1>
                    <p class="card-text">
                        <i class="fa fa-balance-scale"></i>  Средний вес
                        <br>
                        <span>&shy;</span>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-5">
        <div class="col-6">
            <div class="card">
                <div class="card-body">
                    <form action="/results/" class="form-inline" style="float:right">
                        <select name="ex" id="ex" class="form-control">
                            <option selected disabled>Выберите упражнение</option>
                            {% for name in ex_names %}
                                <option value="{{ name }}" {% if name == request.GET.ex %} selected {% endif %}>{{ name }}</option>
                            {% endfor %}
                        </select>
                        <Button class="btn btn-outline-secondary form-control" type="submit">Отправить</Button>
                    </form>
                    <h4 class="card-title">
                        Увеличение силы ({{ request.GET.ex }})
                    </h4>
                    <p class="card-text">
                        <img style="padding-top:2%"src="data:image/png;base64,{{ img3 }}" width="100%">
                    </p>
                </div>
            </div>
        </div>
        <div class="col-6">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">
                        Ежедневное потребление калорий
                    </h4>
                    <p class="card-text">
                        <img src="data:image/png;base64,{{ img2 }}" width="100%">
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-5">
                <div class="col-6">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">
                        История веса
                    </h4>
                    <p class="card-text">
                        <img src="data:image/png;base64,{{ img1 }}" width="100%">
                    </p>
                </div>
            </div>
        </div>
    </div>
{% endblock body %}
